"use strict";(self.webpackChunkdoc_hub=self.webpackChunkdoc_hub||[]).push([[2855],{9376:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/memento-d7187376eee3eb64e96742f4ba2ccc30.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(96540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}},62801:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Wiki/DesignPattern/\u884c\u4e3a\u578b/\u5907\u5fd8\u5f55(Memento)/\u5907\u5fd8\u5f55(Memento)","title":"\u5907\u5fd8\u5f55\u6a21\u5f0f","description":"\u5907\u5fd8\u5f55\u6a21\u5f0f","source":"@site/docs/Wiki/DesignPattern/\u884c\u4e3a\u578b/\u5907\u5fd8\u5f55(Memento)/\u5907\u5fd8\u5f55(Memento).md","sourceDirName":"Wiki/DesignPattern/\u884c\u4e3a\u578b/\u5907\u5fd8\u5f55(Memento)","slug":"/backend/design-pattern/action/memento","permalink":"/en/docs/backend/design-pattern/action/memento","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Wiki/DesignPattern/\u884c\u4e3a\u578b/\u5907\u5fd8\u5f55(Memento)/\u5907\u5fd8\u5f55(Memento).md","tags":[{"inline":true,"label":"\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/en/docs/tags/\u8bbe\u8ba1\u6a21\u5f0f"},{"inline":true,"label":"\u7ed3\u6784\u578b","permalink":"/en/docs/tags/\u7ed3\u6784\u578b"}],"version":"current","frontMatter":{"title":"\u5907\u5fd8\u5f55\u6a21\u5f0f","description":"\u5907\u5fd8\u5f55\u6a21\u5f0f","slug":"/backend/design-pattern/action/memento","hide_table_of_contents":false,"keywords":["\u8bbe\u8ba1\u6a21\u5f0f","\u7ed3\u6784\u578b"],"tags":["\u8bbe\u8ba1\u6a21\u5f0f","\u7ed3\u6784\u578b"],"date":"2017-08-01T00:00:00.000Z","categories":["\u8bbe\u8ba1\u6a21\u5f0f"]},"sidebar":"designPatternSidebar","previous":{"title":"\u8fed\u4ee3\u5668\u6a21\u5f0f","permalink":"/en/docs/backend/design-pattern/action/iterator"},"next":{"title":"\u547d\u4ee4\u6a21\u5f0f","permalink":"/en/docs/backend/design-pattern/action/command"}}');var r=t(74848),a=t(28453);const s={title:"\u5907\u5fd8\u5f55\u6a21\u5f0f",description:"\u5907\u5fd8\u5f55\u6a21\u5f0f",slug:"/backend/design-pattern/action/memento",hide_table_of_contents:!1,keywords:["\u8bbe\u8ba1\u6a21\u5f0f","\u7ed3\u6784\u578b"],tags:["\u8bbe\u8ba1\u6a21\u5f0f","\u7ed3\u6784\u578b"],date:new Date("2017-08-01T00:00:00.000Z"),categories:["\u8bbe\u8ba1\u6a21\u5f0f"]},o=void 0,l={},c=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u9002\u7528\u6027",id:"\u9002\u7528\u6027",level:2},{value:"\u7ed3\u6784",id:"\u7ed3\u6784",level:2},{value:"\u53d1\u8d77\u4eba\uff08Originator\uff09",id:"\u53d1\u8d77\u4ebaoriginator",level:3},{value:"\u7ba1\u7406\u8005\uff08Caretaker\uff09",id:"\u7ba1\u7406\u8005caretaker",level:3},{value:"\u5907\u5fd8\u5f55\uff08Memento\uff09",id:"\u5907\u5fd8\u5f55memento",level:3},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u4f18\u70b9",id:"\u4f18\u70b9",level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,r.jsx)(n.p,{children:'\u5907\u5fd8\u5f55\u6a21\u5f0f\u5c31\u662f\u5728\u4e0d\u7834\u574f\u5c01\u88c5\u7684\u524d\u63d0\u4e0b\uff0c\u6355\u83b7\u4e00\u4e2a\u5bf9\u8c61\u7684\u5185\u90e8\u72b6\u6001\uff0c\u5e76\u5728\u8be5\u5bf9\u8c61\u4e4b\u5916\u4fdd\u5b58\u8fd9\u4e2a\u72b6\u6001\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u4ee5\u540e\u5c06\u5bf9\u8c61\u6062\u590d\u5230\u539f\u5148\u4fdd\u5b58\u7684\u72b6\u6001\u3002\n\u5f88\u591a\u65f6\u5019\u6211\u4eec\u603b\u662f\u9700\u8981\u8bb0\u5f55\u4e00\u4e2a\u5bf9\u8c61\u7684\u5185\u90e8\u72b6\u6001\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u5141\u8bb8\u7528\u6237\u53d6\u6d88\u4e0d\u786e\u5b9a\u6216\u8005\u9519\u8bef\u7684\u64cd\u4f5c\uff0c\u80fd\u591f\u6062\u590d\u5230\u4ed6\u539f\u5148\u7684\u72b6\u6001\uff0c\u4f7f\u5f97\u4ed6\u6709"\u540e\u6094\u836f"\u53ef\u5403\u3002'}),"\n",(0,r.jsx)(n.h2,{id:"\u9002\u7528\u6027",children:"\u9002\u7528\u6027"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9700\u8981\u4fdd\u5b58/\u6062\u590d\u6570\u636e\u7684\u76f8\u5173\u72b6\u6001\u573a\u666f"}),"\n",(0,r.jsx)(n.li,{children:"\u63d0\u4f9b\u4e00\u4e2a\u53ef\u56de\u6eda\u7684\u64cd\u4f5c"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u7ed3\u6784",children:"\u7ed3\u6784"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"memento",src:t(9376).A+"",width:"1380",height:"276"})}),"\n",(0,r.jsx)(n.h3,{id:"\u53d1\u8d77\u4ebaoriginator",children:"\u53d1\u8d77\u4eba\uff08Originator\uff09"}),"\n",(0,r.jsx)(n.p,{children:"\u8bb0\u5f55\u5f53\u524d\u65f6\u523b\u7684\u5185\u90e8\u72b6\u6001\u4fe1\u606f\uff0c\u63d0\u4f9b\u521b\u5efa\u5907\u5fd8\u5f55\u548c\u6062\u590d\u5907\u5fd8\u5f55\u6570\u636e\u7684\u529f\u80fd\uff0c\u5b9e\u73b0\u5176\u4ed6\u4e1a\u52a1\u529f\u80fd\uff0c\u5b83\u53ef\u4ee5\u8bbf\u95ee\u5907\u5fd8\u5f55\u91cc\u7684\u6240\u6709\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u7ba1\u7406\u8005caretaker",children:"\u7ba1\u7406\u8005\uff08Caretaker\uff09"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u5907\u5fd8\u5f55\u8fdb\u884c\u7ba1\u7406\uff0c\u63d0\u4f9b\u4fdd\u5b58\u4e0e\u83b7\u53d6\u5907\u5fd8\u5f55\u7684\u529f\u80fd\uff0c\u4f46\u5176\u4e0d\u80fd\u5bf9\u5907\u5fd8\u5f55\u7684\u5185\u5bb9\u8fdb\u884c\u8bbf\u95ee\u4e0e\u4fee\u6539"}),"\n",(0,r.jsx)(n.h3,{id:"\u5907\u5fd8\u5f55memento",children:"\u5907\u5fd8\u5f55\uff08Memento\uff09"}),"\n",(0,r.jsx)(n.p,{children:"\u8d1f\u8d23\u5b58\u50a8\u53d1\u8d77\u4eba\u7684\u5185\u90e8\u72b6\u6001\uff0c\u5728\u9700\u8981\u7684\u65f6\u5019\u63d0\u4f9b\u8fd9\u4e9b\u5185\u90e8\u72b6\u6001\u7ed9\u53d1\u8d77\u4eba"}),"\n",(0,r.jsx)(n.h2,{id:"\u5b9e\u73b0",children:"\u5b9e\u73b0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'/**\n * \u53d1\u8d77\u4eba\uff1a\u8bb0\u5f55\u5f53\u524d\u65f6\u523b\u7684\u5185\u90e8\u72b6\u6001\uff0c\u8d1f\u8d23\u5b9a\u4e49\u54ea\u4e9b\u5c5e\u4e8e\u5907\u4efd\u8303\u56f4\u7684\u72b6\u6001\uff0c\u8d1f\u8d23\u521b\u5efa\u548c\u6062\u590d\u5907\u5fd8\u5f55\u6570\u636e\n */\npublic class Originator {\n    private String state = "";\n\n    public String getState() {\n        return state;\n    }\n    public void setState(String state) {\n        this.state = state;\n    }\n    public Memento createMemento(){\n        return new Memento(this.state);\n    }\n    public void restoreMemento(Memento memento){\n        this.setState(memento.getState());\n    }\n}\n\n/**\n * \u7ba1\u7406\u89d2\u8272\uff1a\u5bf9\u5907\u5fd8\u5f55\u8fdb\u884c\u7ba1\u7406\uff0c\u4fdd\u5b58\u548c\u63d0\u4f9b\u5907\u5fd8\u5f55\u3002\n */\npublic class Caretaker {\n    private Memento memento;\n    public Memento getMemento(){\n        return memento;\n    }\n    public void setMemento(Memento memento){\n        this.memento = memento;\n    }\n}\n\n/**\n * \u5907\u5fd8\u5f55\uff1a\u8d1f\u8d23\u5b58\u50a8\u53d1\u8d77\u4eba\u5bf9\u8c61\u7684\u5185\u90e8\u72b6\u6001\uff0c\u5728\u9700\u8981\u7684\u65f6\u5019\u63d0\u4f9b\u53d1\u8d77\u4eba\u9700\u8981\u7684\u5185\u90e8\u72b6\u6001\u3002\n */\npublic class Memento {\n    private String state = "";\n    public Memento(String state){\n        this.state = state;\n    }\n    public String getState() {\n        return state;\n    }\n    public void setState(String state) {\n        this.state = state;\n    }\n}\n\npublic class MenentoTest {\n    @Test\n    public void test() {\n        Originator originator = new Originator();\n        originator.setState("\u72b6\u60011");\n        System.out.println("\u521d\u59cb\u72b6\u6001:" + originator.getState());\n        Caretaker caretaker = new Caretaker();\n        caretaker.setMemento(originator.createMemento());\n        originator.setState("\u72b6\u60012");\n        System.out.println("\u6539\u53d8\u540e\u72b6\u6001:" + originator.getState());\n        originator.restoreMemento(caretaker.getMemento());\n        System.out.println("\u6062\u590d\u540e\u72b6\u6001:" + originator.getState());\n    }\n}\n\n## \u7ed3\u679c\n\u521d\u59cb\u72b6\u6001:\u72b6\u60011\n\u6539\u53d8\u540e\u72b6\u6001:\u72b6\u60012\n\u6062\u590d\u540e\u72b6\u6001:\u72b6\u60011\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsx)(n.h3,{id:"\u4f18\u70b9",children:"\u4f18\u70b9"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7ed9\u7528\u6237\u63d0\u4f9b\u4e86\u4e00\u79cd\u53ef\u4ee5\u6062\u590d\u72b6\u6001\u7684\u673a\u5236\uff0c\u53ef\u4ee5\u4f7f\u7528\u6237\u80fd\u591f\u6bd4\u8f83\u65b9\u4fbf\u5730\u56de\u5230\u67d0\u4e2a\u5386\u53f2\u7684\u72b6\u6001\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5b9e\u73b0\u4e86\u4fe1\u606f\u7684\u5c01\u88c5\uff0c\u4f7f\u5f97\u7528\u6237\u4e0d\u9700\u8981\u5173\u5fc3\u72b6\u6001\u7684\u4fdd\u5b58\u7ec6\u8282\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u7f3a\u70b9",children:"\u7f3a\u70b9"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6d88\u8017\u8d44\u6e90\uff0c\u5982\u679c\u7c7b\u7684\u6210\u5458\u53d8\u91cf\u8fc7\u591a\uff0c\u52bf\u5fc5\u4f1a\u5360\u7528\u6bd4\u8f83\u5927\u7684\u8d44\u6e90\uff0c\u800c\u4e14\u6bcf\u4e00\u6b21\u4fdd\u5b58\u90fd\u4f1a\u6d88\u8017\u4e00\u5b9a\u7684\u5185\u5b58\u3002"}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);