"use strict";(self.webpackChunkdoc_hub=self.webpackChunkdoc_hub||[]).push([[8604],{28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>s});var o=n(96540);const r={},c=o.createContext(r);function i(e){const a=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(c.Provider,{value:a},e.children)}},51777:(e,a,n)=>{n.d(a,{A:()=>o});const o=n.p+"assets/images/\u67e5\u8be2\u955c\u50cf-3fabc6dcfd423837ca1fca948ed48f53.jpg"},64710:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>t,contentTitle:()=>s,default:()=>k,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"CloudNative/Docker/Docker\u6784\u5efaKafka/Docker\u6784\u5efaKafka","title":"Docker \u6784\u5efa Kafka","description":"Docker \u6784\u5efa Kafka","source":"@site/docs/CloudNative/Docker/Docker\u6784\u5efaKafka/Docker\u6784\u5efaKafka.md","sourceDirName":"CloudNative/Docker/Docker\u6784\u5efaKafka","slug":"/cloud-native/docker/build-kafka","permalink":"/docs/cloud-native/docker/build-kafka","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CloudNative/Docker/Docker\u6784\u5efaKafka/Docker\u6784\u5efaKafka.md","tags":[{"inline":true,"label":"Docker","permalink":"/docs/tags/docker"},{"inline":true,"label":"Kafka","permalink":"/docs/tags/kafka"},{"inline":true,"label":"CloudNative","permalink":"/docs/tags/cloud-native"}],"version":"current","frontMatter":{"title":"Docker \u6784\u5efa Kafka","description":"Docker \u6784\u5efa Kafka","slug":"/cloud-native/docker/build-kafka","hide_table_of_contents":false,"keywords":["Docker","Kafka"],"tags":["Docker","Kafka","CloudNative"],"date":"2017-08-01T00:00:00.000Z","categories":["Docker"]},"sidebar":"dockerSidebar","previous":{"title":"Docker \u6784\u5efa Redis","permalink":"/docs/cloud-native/docker/build-redis"},"next":{"title":"Docker \u6784\u5efa Nginx","permalink":"/docs/cloud-native/docker/build-ngnix"}}');var r=n(74848),c=n(28453);const i={title:"Docker \u6784\u5efa Kafka",description:"Docker \u6784\u5efa Kafka",slug:"/cloud-native/docker/build-kafka",hide_table_of_contents:!1,keywords:["Docker","Kafka"],tags:["Docker","Kafka","CloudNative"],date:new Date("2017-08-01T00:00:00.000Z"),categories:["Docker"]},s=void 0,t={},l=[{value:"Docker \u6784\u5efa Kafka",id:"docker-\u6784\u5efa-kafka",level:2},{value:"1.\u67e5\u8be2 ZooKeeper \u955c\u50cf",id:"1\u67e5\u8be2-zookeeper-\u955c\u50cf",level:2},{value:"2.\u62c9\u53d6\u955c\u50cf",id:"2\u62c9\u53d6\u955c\u50cf",level:2},{value:"3.\u542f\u52a8 zookeeper",id:"3\u542f\u52a8-zookeeper",level:2},{value:"\u53c2\u6570\u89e3\u6790",id:"\u53c2\u6570\u89e3\u6790",level:3},{value:"4.\u9a8c\u8bc1\u5bb9\u5668\u72b6\u6001",id:"4\u9a8c\u8bc1\u5bb9\u5668\u72b6\u6001",level:2},{value:"\u542f\u52a8 kafka \u751f\u4ea7\u8005",id:"\u542f\u52a8-kafka-\u751f\u4ea7\u8005",level:3},{value:"\u542f\u52a8 kafka \u6d88\u8d39\u8005",id:"\u542f\u52a8-kafka-\u6d88\u8d39\u8005",level:3},{value:"\u751f\u4ea7\u8005\u53d1\u5e03\u6d88\u606f",id:"\u751f\u4ea7\u8005\u53d1\u5e03\u6d88\u606f",level:3},{value:"\u6d88\u8d39\u8005\u63a5\u53d7\u6d88\u606f",id:"\u6d88\u8d39\u8005\u63a5\u53d7\u6d88\u606f",level:3}];function d(e){const a={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.h2,{id:"docker-\u6784\u5efa-kafka",children:"Docker \u6784\u5efa Kafka"}),"\n",(0,r.jsx)(a.h2,{id:"1\u67e5\u8be2-zookeeper-\u955c\u50cf",children:"1.\u67e5\u8be2 ZooKeeper \u955c\u50cf"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker search kafka\n"})}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.img,{alt:"\u67e5\u8be2\u955c\u50cf",src:n(51777).A+"",width:"2096",height:"1004"})}),"\n",(0,r.jsx)(a.h2,{id:"2\u62c9\u53d6\u955c\u50cf",children:"2.\u62c9\u53d6\u955c\u50cf"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker pull bitnami/kafka\n"})}),"\n",(0,r.jsx)(a.h2,{id:"3\u542f\u52a8-zookeeper",children:"3.\u542f\u52a8 zookeeper"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker run -d \\\n           --name zookeeper \\\n           --privileged=true \\\n           --restart=always \\\n           -p 2181:2181 \\\n           -v /data/docker/zookeeper/data:/data \\\n           -v /data/docker/zookeeper/conf:/conf \\\n           -v /data/docker/zookeeper/logs:/datalog \\\n           zookeeper\n"})}),"\n",(0,r.jsx)(a.p,{children:"4.\u542f\u52a8 kafka"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker run -d \\\n           --name kafka \\\n           -p 9092:9092 \\\n           --restart=always \\\n           -e KAFKA_BROKER_ID=0 \\\n           -e KAFKA_ZOOKEEPER_CONNECT=docker.for.mac.host.internal:2181/kafka \\\n           -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://docker.for.mac.host.internal:9092 \\\n           -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 \\\n           -e ALLOW_PLAINTEXT_LISTENER=yes \\\n           bitnami/kafka\n"})}),"\n",(0,r.jsx)(a.h3,{id:"\u53c2\u6570\u89e3\u6790",children:"\u53c2\u6570\u89e3\u6790"}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:"-d: \u6307\u5b9a\u5bb9\u5668\u540e\u53f0\u8fd0\u884c"}),"\n",(0,r.jsx)(a.p,{children:"\u2013name kafka: \u6307\u5b9a\u5bb9\u5668\u522b\u540d"}),"\n",(0,r.jsx)(a.p,{children:"-p: \u53c2\u6570\u6307\u5b9a\u7aef\u53e3\u53f7"}),"\n",(0,r.jsx)(a.p,{children:"-e: \u8bbe\u7f6e docker \u5bb9\u5668\u5185\u73af\u5883\u53d8\u91cf"}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:"\u5728 kafka \u96c6\u7fa4\u4e2d\uff0c\u6bcf\u4e2a kafka \u90fd\u6709\u4e00\u4e2a BROKER_ID \u6765\u533a\u5206\u81ea\u5df1"}),"\n"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"KAFKA_BROKER_ID=0"}),"\n"]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:"\u914d\u7f6e zookeeper \u7ba1\u7406 kafka \u7684\u8def\u5f84"}),"\n"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.code,{children:"KAFKA_ZOOKEEPER_CONNECT={host-ip}:{zookeeper-port}/kafka"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:"\u628a kafka \u7684\u5730\u5740\u7aef\u53e3\u6ce8\u518c\u7ed9 zookeeper"}),"\n"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.code,{children:"KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://{host-ip}:9092"})}),"\n"]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:"\u5141\u8bb8\u4f7f\u7528 PLAINTEXT \u4fa6\u542c\u5668"}),"\n"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"ALLOW_PLAINTEXT_LISTENER"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"4\u9a8c\u8bc1\u5bb9\u5668\u72b6\u6001",children:"4.\u9a8c\u8bc1\u5bb9\u5668\u72b6\u6001"}),"\n",(0,r.jsx)(a.h3,{id:"\u542f\u52a8-kafka-\u751f\u4ea7\u8005",children:"\u542f\u52a8 kafka \u751f\u4ea7\u8005"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"$ docker exec -it kafka bash\nI have no name!@439a150128f5:/$ cd /opt/bitnami/kafka/bin/\nI have no name!@439a150128f5:/opt/bitnami/kafka/bin$ ./kafka-console-producer.sh --broker-list localhost:9092 --topic first-topic\n"})}),"\n",(0,r.jsx)(a.h3,{id:"\u542f\u52a8-kafka-\u6d88\u8d39\u8005",children:"\u542f\u52a8 kafka \u6d88\u8d39\u8005"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker exec -it kafka bash\nI have no name!@439a150128f5:/$ cd /opt/bitnami/kafka/bin/\nI have no name!@439a150128f5:/opt/bitnami/kafka/bin$ ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first-topic --from-beginning\n"})}),"\n",(0,r.jsx)(a.h3,{id:"\u751f\u4ea7\u8005\u53d1\u5e03\u6d88\u606f",children:"\u751f\u4ea7\u8005\u53d1\u5e03\u6d88\u606f"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:" docker exec -it kafka bash\nI have no name!@439a150128f5:/$ cd /opt/bitnami/kafka/bin/\nI have no name!@439a150128f5:/opt/bitnami/kafka/bin$ ./kafka-console-producer.sh --broker-list localhost:9092 --topic first-topic\n>First Message!\n"})}),"\n",(0,r.jsx)(a.h3,{id:"\u6d88\u8d39\u8005\u63a5\u53d7\u6d88\u606f",children:"\u6d88\u8d39\u8005\u63a5\u53d7\u6d88\u606f"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker exec -it kafka bash\nI have no name!@439a150128f5:/$ cd /opt/bitnami/kafka/bin/\nI have no name!@439a150128f5:/opt/bitnami/kafka/bin$ ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first-topic --from-beginning\n[2023-04-01 08:38:41,612] WARN [Consumer clientId=console-consumer, groupId=console-consumer-47284] Error while fetching metadata with correlation id 2 : {first-topic=LEADER_NOT_AVAILABLE} (org.apache.kafka.clients.NetworkClient)\n[2023-04-01 08:38:41,743] WARN [Consumer clientId=console-consumer, groupId=console-consumer-47284] Error while fetching metadata with correlation id 4 : {first-topic=LEADER_NOT_AVAILABLE} (org.apache.kafka.clients.NetworkClient)\n[2023-04-01 08:38:41,920] WARN [Consumer clientId=console-consumer, groupId=console-consumer-47284] Error while fetching metadata with correlation id 6 : {first-topic=LEADER_NOT_AVAILABLE} (org.apache.kafka.clients.NetworkClient)\n[2023-04-01 08:38:42,044] WARN [Consumer clientId=console-consumer, groupId=console-consumer-47284] Error while fetching metadata with correlation id 8 : {first-topic=LEADER_NOT_AVAILABLE} (org.apache.kafka.clients.NetworkClient)\n[2023-04-01 08:38:42,213] WARN [Consumer clientId=console-consumer, groupId=console-consumer-47284] Error while fetching metadata with correlation id 10 : {first-topic=LEADER_NOT_AVAILABLE} (org.apache.kafka.clients.NetworkClient)\nFirst Message!\n"})})]})}function k(e={}){const{wrapper:a}={...(0,c.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);