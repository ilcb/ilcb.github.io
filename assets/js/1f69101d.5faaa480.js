"use strict";(self.webpackChunkdoc_hub=self.webpackChunkdoc_hub||[]).push([[8645],{19938:(e,n,o)=>{o.d(n,{A:()=>c});const c=o.p+"assets/images/nacos-mainpage-24444122448fd0d0153a5f0138d19865.jpg"},28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>t});var c=o(96540);const s={},a=c.createContext(s);function r(e){const n=c.useContext(a);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(a.Provider,{value:n},e.children)}},73912:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"CloudNative/Docker/Docker\u6784\u5efaNacos/Docker\u6784\u5efaNacos","title":"Docker \u6784\u5efa Nacos","description":"Docker \u6784\u5efa Nacos","source":"@site/docs/CloudNative/Docker/Docker\u6784\u5efaNacos/Docker\u6784\u5efaNacos.md","sourceDirName":"CloudNative/Docker/Docker\u6784\u5efaNacos","slug":"/cloud-native/docker/build-nacos","permalink":"/docs/cloud-native/docker/build-nacos","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CloudNative/Docker/Docker\u6784\u5efaNacos/Docker\u6784\u5efaNacos.md","tags":[{"inline":true,"label":"Docker","permalink":"/docs/tags/docker"},{"inline":true,"label":"CloudNative","permalink":"/docs/tags/cloud-native"}],"version":"current","frontMatter":{"title":"Docker \u6784\u5efa Nacos","description":"Docker \u6784\u5efa Nacos","slug":"/cloud-native/docker/build-nacos","hide_table_of_contents":false,"keywords":["Docker"],"tags":["Docker","CloudNative"],"date":"2017-08-01T00:00:00.000Z","categories":["Docker"]},"sidebar":"dockerSidebar","previous":{"title":"Docker \u6784\u5efa Nginx","permalink":"/docs/cloud-native/docker/build-ngnix"},"next":{"title":"Docker \u6784\u5efa MongoDB","permalink":"/docs/cloud-native/docker/build-mongo"}}');var s=o(74848),a=o(28453);const r={title:"Docker \u6784\u5efa Nacos",description:"Docker \u6784\u5efa Nacos",slug:"/cloud-native/docker/build-nacos",hide_table_of_contents:!1,keywords:["Docker"],tags:["Docker","CloudNative"],date:new Date("2017-08-01T00:00:00.000Z"),categories:["Docker"]},t="Docker \u6784\u5efa Nacos",d={},l=[{value:"1. \u524d\u7f6e\u51c6\u5907",id:"1-\u524d\u7f6e\u51c6\u5907",level:2},{value:"2.\u62c9\u53d6\u955c\u50cf",id:"2\u62c9\u53d6\u955c\u50cf",level:2},{value:"3.\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6",id:"3\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6",level:2},{value:"4. mysql \u65b0\u5efa\u5e76\u6267\u884c nacos \u811a\u672c",id:"4-mysql-\u65b0\u5efa\u5e76\u6267\u884c-nacos-\u811a\u672c",level:2},{value:"5.\u542f\u52a8\u5bb9\u5668",id:"5\u542f\u52a8\u5bb9\u5668",level:2},{value:"4.\u767b\u9646 nacos",id:"4\u767b\u9646-nacos",level:2}];function i(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker-\u6784\u5efa-nacos",children:"Docker \u6784\u5efa Nacos"})}),"\n",(0,s.jsx)(n.h2,{id:"1-\u524d\u7f6e\u51c6\u5907",children:"1. \u524d\u7f6e\u51c6\u5907"}),"\n",(0,s.jsx)(n.h2,{id:"2\u62c9\u53d6\u955c\u50cf",children:"2.\u62c9\u53d6\u955c\u50cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"## \u62c9\u53d6\u955c\u50cf\ndocker pull nacos/nacos-server:2.3.1\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6",children:"3.\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:"\u8bbe\u7f6e nacos \u6302\u8f7d\u76ee\u5f55\u4e3a/data/docker/nacos\uff0c\u5e76\u5c06\u5bb9\u5668\u91cc\u90fd conf \u76ee\u5f55\u3001logs \u76ee\u5f55\u3001data \u76ee\u5f55\u590d\u5236\u5230\u5bbf\u4e3b\u673a/data/docker/nacos \u76ee\u5f55\u91cc\uff0c\u6267\u884c\u4e0b\u9762\u90fd\u547d\u4ee4\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6302\u8f7d mysql \u7684\u914d\u7f6e\u6587\u4ef6"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p /data/docker/nacos/{logs,conf,data}\n\n#\u542f\u52a8nacos\u5bb9\u5668\ndocker run --name nacos -d -p 8848:8848 -e MODE=standalone  nacos/nacos-server:latest\n\ndocker cp nacos:/home/nacos/conf /data/docker/nacos\ndocker cp nacos:/home/nacos/logs /data/docker/nacos\ndocker cp nacos:/home/nacos/data /data/docker/nacos\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-mysql-\u65b0\u5efa\u5e76\u6267\u884c-nacos-\u811a\u672c",children:"4. mysql \u65b0\u5efa\u5e76\u6267\u884c nacos \u811a\u672c"}),"\n",(0,s.jsxs)(n.p,{children:["mysql \u65b0\u5efa nacos \u7684\u6570\u636e\u5e93\uff0c\u5e76\u6267\u884c\u811a\u672c sql \u811a\u672c\u5730\u5740\u5982\u4e0b\uff1a\n",(0,s.jsx)(n.a,{href:"https://github.com/alibaba/nacos/blob/master/config/src/main/resources/META-INF/nacos-db.sql",children:"https://github.com/alibaba/nacos/blob/master/config/src/main/resources/META-INF/nacos-db.sql"})]}),"\n",(0,s.jsx)(n.h2,{id:"5\u542f\u52a8\u5bb9\u5668",children:"5.\u542f\u52a8\u5bb9\u5668"}),"\n",(0,s.jsx)(n.p,{children:"\u505c\u6b62\u5bb9\u5668"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker stop nacos"})}),"\n",(0,s.jsx)(n.p,{children:"\u5f7b\u5e95\u5220\u9664\u5bb9\u5668"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker rm nacos"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'docker run -itd \\\n           -p 8848:8848 \\\n           -p 9848:9848 \\\n           --privileged=true \\\n           --restart=always \\\n           -v /data/docker/nacos/conf:/home/nacos/conf \\\n           -v /data/docker/nacos/logs:/home/nacos/logs \\\n           -v /data/docker/nacos/:/home/nacos/data \\\n           -e JVM_XMS=256m \\\n           -e JVM_XMX=256m \\\n           -e MODE=standalone \\\n           -e PREFER_HOST_MODE=hostname \\\n           -e SPRING_DATASOURCE_PLATFORM=mysql \\\n           -e MYSQL_SERVICE_HOST=10.253.18.225 \\\n           -e MYSQL_SERVICE_PORT=3306 \\\n           -e MYSQL_SERVICE_DB_NAME=nacos_config \\\n           -e MYSQL_SERVICE_USER=root \\\n           -e MYSQL_SERVICE_PASSWORD=ytsl@2021 \\\n           -e MYSQL_SERVICE_DB_PARAM="characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true" \\\n           -e NACOS_AUTH_ENABLE=false \\\n           -e NACOS_AUTH_TOKEN=SecretKey012345678901234567890123456789012345678901234567890123456789 \\\n           -e NACOS_AUTH_IDENTITY_KEY=serverIdentity \\\n           --name nacos nacos/nacos-server:2.3.1\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u552f\u4e00\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a",(0,s.jsx)(n.code,{children:"MYSQL_SERVICE_HOST"})," \u4e00\u5b9a\u8981\u8bbe\u7f6e\u4e3a\u4e3b\u673a\u7684 IP \u5730\u5740\uff0c\u56e0\u4e3a\u662f\u4e0d\u540c\u5bb9\u5668\uff08nacos \u548c mysql\uff09\u95f4\u7684\u8fde\u63a5\uff0c\u6240\u4ee5\u4e00\u5b9a\u4e0d\u80fd\u7528 localhost"]}),"\n",(0,s.jsx)(n.h2,{id:"4\u767b\u9646-nacos",children:"4.\u767b\u9646 nacos"}),"\n",(0,s.jsxs)(n.p,{children:["\u6d4f\u89c8\u5668\u8bbf\u95ee: ",(0,s.jsx)(n.a,{href:"http://xx.xx.xx.xx:8848",children:"http://xx.xx.xx.xx:8848"}),"\n",(0,s.jsx)(n.img,{alt:"nacos-mainpage.jpg",src:o(19938).A+"",width:"2876",height:"1426"})]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}}}]);